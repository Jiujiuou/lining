# 小贝壳作战 · 优化建议

围绕「长期跟踪数据变化」和「变化与 action 的相关性」整理的可优化点，按优先级和实现成本大致划分。

---

## 一、长期跟踪数据

### 1.1 数据持久化（高价值）

- **现状**：每次刷新或关闭页面，数据丢失；每次都要重新上传。
- **建议**：
  - 解析完成后将 `parsedData` 写入 **localStorage**（或 IndexedDB 若数据量大），进入看板时优先从本地恢复。
  - 可选：顶栏增加「清除本地数据」入口，避免旧数据一直占着。
- **效果**：刷新、改完代码再打开，仍能继续看上次的表格，更适合长期用同一份数据做对比。

### 1.2 追加模式（高价值）

- **现状**：新上传的 Excel 会**完全替换**当前数据。
- **建议**：
  - 上传时提供两种方式：「**替换**」/「**追加**」。
  - 追加：新表里的日期若在现有 `dates` 中不存在则并入，已存在的日期可选择「覆盖」或「保留旧」；动作记录同理合并。
- **效果**：可以每周/每月导出一份新表，不断「往历史里加」，真正形成长期时间线。

### 1.3 按「日期」维度的趋势（中高价值）

- **现状**：横轴是 9～24 点，多日时是多条「单日曲线」叠在一起。
- **建议**：
  - 增加一种视图：**单指标 × 全日期**。横轴 = 日期（或日期+固定钟点），纵轴 = 该指标，一条线看整段时间的走势。
  - 例如：「小贝壳-搜索访客数」按日汇总（如取当日 24 点或日均）画成一条折线，方便看周/月趋势。
- **效果**：长期跟踪时，不用在 9 格×多日线里找规律，先看「整体是升是降、哪几天异常」。

### 1.4 日期范围与快捷选项（中价值）

- **建议**：
  - 多日连续增加「**最近 14 天**」「**本月**」等快捷选项（在解析出的 dates 内截取）。
  - 多日自选支持「全选」「清空」「选本周/上周」。
- **效果**：减少重复点选，更适合固定节奏的复盘（如每周看上周）。

---

## 二、变化与 action 的相关性

### 2.1 图表上标出「有动作」的时刻（高价值）

- **现状**：只有悬停到某点时，tooltip 里才看到该点是否有动作。
- **建议**：
  - 在折线图**横轴对应位置**（或略上方）对「该时刻存在动作记录」的时刻做轻量标记：如小三角、竖短线或淡色点，不抢眼但一扫能看出「这些钟点有操作」。
  - 可选：图例中加一项「● 有动作」，或对标记做简单说明。
- **效果**：一眼看到「动作发生在哪些时间」，再结合曲线形态（如动作前后升/降）判断相关性，无需逐个点悬停。

### 2.2 动作时间线 / 列表（中高价值）

- **建议**：
  - 增加一个**侧边或可折叠面板**：「按日期+时间排序的动作列表」。
  - 每条展示：日期、钟点、动作文案（已有「分类-动作」）；点击某条可**高亮**主视图中对应日期+钟点（若当前视图包含该日），或自动切到该日并高亮该点。
- **效果**：从「动作」出发找数据：先看「我那天 14 点改了什么」，再去看 14 点前后曲线怎么变。

### 2.3 前后对比（中价值）

- **建议**：
  - 在 tooltip 或图旁增加「**较前一时段**」的简单对比，例如：当前点 80，前一时段 65 → 显示「+15」或「+23%」。
  - 或多日时，在表格/图例旁增加一句：如「较昨日：搜索访客 +12，转化 -0.5%」。
- **效果**：快速判断「这个点相对之前是升是降」，再结合该点是否有动作，加强「动作—变化」的直觉。

### 2.4 动作类型与指标关联（中长期）

- **建议**：
  - 若后续动作文案能稍微结构化（如统一「主图」「详情页」「评价」等前缀），可做：
  - 筛选：只显示「包含某类动作」的日期或时刻；
  - 或简单统计：某类动作出现当天/当点，某指标平均变化（需定义「前一时段」基线）。
- **效果**：从「感觉」升级到「某类操作和某指标是否常一起变」。

---

## 三、功能与体验

### 3.1 导出与留存

- **导出图片**：当前视图（如 3×3 或放大的一张图）导出为 PNG，方便写周报/复盘。
- **导出数据**：将当前 `parsedData` 或「选中日期范围内的数据」导出为 JSON/CSV，便于在 Excel 或其他工具里做更复杂分析。

### 3.2 大类/指标筛选（中价值）

- **建议**：顶栏或侧边增加「只看小贝壳」「只看销量」或勾选某几个指标，主区域只渲染选中的图，减少干扰。
- **效果**：长期跟踪时专注 1～2 个指标，更容易发现和 action 的关系。

### 3.3 加载与空状态

- **解析中**：大文件解析时显示 loading（如骨架或转圈），避免白屏。
- **无数据**：选中日期范围内某指标全空时，格内友好文案「该时段无数据」而非空白或报错。

### 3.4 键盘与可访问性

- **放大态**：左右箭头已存在，可补充键盘左右键切换上一张/下一张；Tab 聚焦到箭头与关闭区域。
- **Tooltip**：确保固定位置后仍能被读屏识别（当前若用原生 Recharts 结构，一般已具备一定可访问性，可再核对一次）。

---

## 四、UI 与交互细节

### 4.1 默认视图

- **建议**：若本地已有数据且存在多日，进入看板时默认「多日连续 + 最近 3 天或 7 天」，减少每次切模式的步骤。
- **效果**：打开即看到「近期趋势」，更符合「长期跟踪」的使用习惯。

### 4.2 图例与多日线

- **建议**：多日线较多（如 7 条）时，图例可考虑收起为「展开图例」或只显示日期缩写，避免占满图表上方。
- **颜色**：当前色板已区分度不错，若日后日期更多，可考虑「最近一天最醒目、越早越淡」的层级。

### 4.3 上传入口保留

- **建议**：在看板顶栏保留「更换数据」的同时，可增加「追加数据」入口（与 1.2 追加模式配合），或在上传区文案里区分「替换」/「追加」。
- **效果**：长期用同一设备时，不会误以为只能「换」不能「加」。

---

## 五、优先级建议（实现顺序）

| 优先级 | 项 | 目标 |
|--------|----|------|
| P0 | 图表上标出「有动作」的时刻 | 直接强化「变化—action」的可视关联 |
| P0 | 数据持久化（localStorage） | 支持长期用同一份数据，刷新不丢 |
| P1 | 追加模式（上传时选追加/替换） | 真正积累多周/多月历史 |
| P1 | 动作时间线面板（可点跳转/高亮） | 从动作反查数据 |
| P2 | 按日期维度的趋势视图（单指标全日期） | 长期走势一目了然 |
| P2 | 快捷日期范围 + 默认多日视图 | 减少操作、符合复盘习惯 |
| P2 | 导出图片 / 导出数据 | 写报告、外部分析 |
| P3 | 大类/指标筛选、前后对比文案、加载与空状态 | 体验与深度分析 |

以上建议都围绕「长期跟踪数据变化」和「变化与 action 的相关性」展开，可按需选做；若你愿意先做其中几项，我可以按该顺序帮你落到具体实现（例如先做「有动作时刻标记」+「localStorage 持久化」）。
